
<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Compute Servers &mdash; CoCalc Manual  documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=fa44fd50" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=19f00094" />

  
    <link rel="shortcut icon" href="_static/favicon-32x32.png"/>
    <link rel="canonical" href="https://doc.cocalc.com/compute_server.html" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="_static/jquery.js?v=5d32c60e"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="_static/documentation_options.js?v=5929fcd5"></script>
        <script src="_static/doctools.js?v=9a2dae69"></script>
        <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
        <script src="https://cocalc.com/analytics.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Pay-As-You-Go Purchase" href="paygo.html" />
    <link rel="prev" title="Licenses" href="licenses.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
    <link rel="canonical" href="https://doc.cocalc.com/compute_server.html"/>
  

</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

<a href="index.html" class="icon icon-home"> CoCalc Manual
  <img src="_static/_static/cocalc-doc-logo.svg" class="logo" alt="Logo"/>
</a>


<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>


        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="working_with.html">Working With</a></li>
<li class="toctree-l1"><a class="reference internal" href="platform.html">Platform</a></li>
<li class="toctree-l1"><a class="reference internal" href="user_interface.html">User Interface</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="service_options.html">Service Options</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="trial.html">Trial Projects</a></li>
<li class="toctree-l2"><a class="reference internal" href="licenses.html">Licenses</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Compute Servers</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#cocalc-s-most-unique-offering">CoCalc’s Most Unique Offering</a></li>
<li class="toctree-l3"><a class="reference internal" href="#examples-of-compute-server-uses">Examples of Compute Server Uses</a></li>
<li class="toctree-l3"><a class="reference internal" href="#do-i-still-need-a-license">Do I Still Need a License?</a></li>
<li class="toctree-l3"><a class="reference internal" href="#creating-a-compute-server">Creating a Compute Server</a></li>
<li class="toctree-l3"><a class="reference internal" href="#using-a-compute-server">Using a Compute Server</a></li>
<li class="toctree-l3"><a class="reference internal" href="#becoming-root-and-port-forwarding">Becoming root and Port Forwarding</a></li>
<li class="toctree-l3"><a class="reference internal" href="#billing-for-a-compute-server">Billing for a Compute Server</a></li>
<li class="toctree-l3"><a class="reference internal" href="#compute-server-filesystem">Compute Server Filesystem</a></li>
<li class="toctree-l3"><a class="reference internal" href="#compute-server-vpn">Compute Server VPN</a></li>
<li class="toctree-l3"><a class="reference internal" href="#choosing-a-cloud">Choosing a Cloud</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#cost">Cost</a></li>
<li class="toctree-l4"><a class="reference internal" href="#availability">Availability</a></li>
<li class="toctree-l4"><a class="reference internal" href="#geographic-location">Geographic Location</a></li>
<li class="toctree-l4"><a class="reference internal" href="#special-considerations">Special Considerations</a></li>
<li class="toctree-l4"><a class="reference internal" href="#google">Google</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hyperstack">Hyperstack</a></li>
<li class="toctree-l4"><a class="reference internal" href="#on-prem">On Prem</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#teaching-with-compute-servers">Teaching with Compute Servers</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="paygo.html">Pay-As-You-Go Purchase</a></li>
<li class="toctree-l2"><a class="reference internal" href="vouchers.html">Vouchers</a></li>
<li class="toctree-l2"><a class="reference internal" href="on-premises.html">On-Premises CoCalc</a></li>
<li class="toctree-l2"><a class="reference internal" href="cocalc-cloud.html">CoCalc Cloud</a></li>
<li class="toctree-l2"><a class="reference internal" href="cocalc-desktop.html">CoCalc Desktop</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="teaching-instructors.html">Instructor Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="teaching-students.html">Student Guide</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Appendix</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="references.html">References</a></li>
<li class="toctree-l1"><a class="reference internal" href="genindex.html">Index</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
  <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
  <a href="index.html">CoCalc Manual</a>

      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="contents.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="service_options.html">Service Options</a></li>
      <li class="breadcrumb-item active">Compute Servers</li>
<li class="wy-breadcrumbs-aside" style="padding: 0;">
  <a
    class="fa fa-question-circle"
    href="https://cocalc.com/support/new?type=question&subject=A%20question%20about%20CoCalc%20...&body=&title=Ask%20us%20a%20Question!"
    style="background-color: #daeefb; color: black; border: 3px solid #2980b9; padding: 2px 5px; border-radius: 4px;"
  >
    Ask us a Question!
  </a>
</li>

  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="compute-servers">
<span id="index-0"></span><span id="id1"></span><h1>Compute Servers<a class="headerlink" href="#compute-servers" title="Link to this heading"></a></h1>
<nav class="contents local" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#cocalc-s-most-unique-offering" id="id21">CoCalc’s Most Unique Offering</a></p></li>
<li><p><a class="reference internal" href="#examples-of-compute-server-uses" id="id22">Examples of Compute Server Uses</a></p></li>
<li><p><a class="reference internal" href="#do-i-still-need-a-license" id="id23">Do I Still Need a License?</a></p></li>
<li><p><a class="reference internal" href="#creating-a-compute-server" id="id24">Creating a Compute Server</a></p></li>
<li><p><a class="reference internal" href="#using-a-compute-server" id="id25">Using a Compute Server</a></p></li>
<li><p><a class="reference internal" href="#becoming-root-and-port-forwarding" id="id26">Becoming root and Port Forwarding</a></p></li>
<li><p><a class="reference internal" href="#billing-for-a-compute-server" id="id27">Billing for a Compute Server</a></p></li>
<li><p><a class="reference internal" href="#compute-server-filesystem" id="id28">Compute Server Filesystem</a></p></li>
<li><p><a class="reference internal" href="#compute-server-vpn" id="id29">Compute Server VPN</a></p></li>
<li><p><a class="reference internal" href="#choosing-a-cloud" id="id30">Choosing a Cloud</a></p>
<ul>
<li><p><a class="reference internal" href="#cost" id="id31">Cost</a></p></li>
<li><p><a class="reference internal" href="#availability" id="id32">Availability</a></p></li>
<li><p><a class="reference internal" href="#geographic-location" id="id33">Geographic Location</a></p></li>
<li><p><a class="reference internal" href="#special-considerations" id="id34">Special Considerations</a></p></li>
<li><p><a class="reference internal" href="#google" id="id35">Google</a></p></li>
<li><p><a class="reference internal" href="#hyperstack" id="id36">Hyperstack</a></p></li>
<li><p><a class="reference internal" href="#on-prem" id="id37">On Prem</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#teaching-with-compute-servers" id="id38">Teaching with Compute Servers</a></p></li>
</ul>
</nav>
<section id="cocalc-s-most-unique-offering">
<h2><a class="toc-backref" href="#id21" role="doc-backlink">CoCalc’s Most Unique Offering</a><a class="headerlink" href="#cocalc-s-most-unique-offering" title="Link to this heading"></a></h2>
<p>A compute server in CoCalc brings you closer to your dreams using an extremely powerful and flexible combination of</p>
<ul class="simple">
<li><dl class="simple">
<dt><strong>Reliable hardware resources - ranging from minimal to MASSIVE!</strong></dt><dd><ul>
<li><p>From 1/4 to over 400 CPU cores on a single node plus cluster support</p></li>
<li><p>From 1 to over 10,000 GB RAM</p></li>
<li><p>From 10 to over 1,000,000 GB disk</p></li>
<li><p>From a single T4 (or no GPU at all) <strong>to 8x H100</strong>, with tons of options in between, including access to L4 and L40, RTX-A4/5/6000, and A100 with 40 GB or 80 GB of RAM</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><strong>Access to multiple clouds - in a unified way that does not hide their superpowers!</strong></dt><dd><ul>
<li><p>Running out of disk space? Increase it seamlessly on the fly!</p></li>
<li><p>Can deal with occasional interruptions? Benefit from Google discounts on spot instances!</p></li>
<li><p>Need sustainable GPUs and free network? Pick Hyperstack!</p></li>
<li><p>Have a powerful laptop or a cluster? Turn it into a cloud!</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><strong>Finely pre-configured software images - don’t waste your time!</strong></dt><dd><ul>
<li><p>SageMath, Anaconda, Google Colab, Julia, PyTorch, Tensorflow, Open WebUI, etc.</p></li>
<li><p>Most things work right out of the box</p></li>
<li><p>Install anything as root, use Docker and Kubernetes</p></li>
<li><p>Launch JupyterLab or VS Code with just one click</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><strong>CoCalc’s renowned interface - honed from years of experience and feedback!</strong></dt><dd><ul>
<li><p>Code files are synchronized with your CoCalc project’s file system</p></li>
<li><p>Real-Time Collaboration and AI Assistant with a plethora of LLMs</p></li>
<li><p>User friendly version control Time Travel (or your beloved git)</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><strong>CoCalc’s dedicated team - support you can rely on!</strong></dt><dd><ul>
<li><p>Benefit from our expertise, <strong>focus on YOUR work</strong></p></li>
<li><p>Enjoy a personable approach, schedule a video chat with us anytime</p></li>
<li><p>Request custom images and features</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><strong>Transparent billing - no surprises!</strong></dt><dd><ul>
<li><p>See competitive prices while configuring your server</p></li>
<li><p>Pay by the second when resources are in use</p></li>
<li><p>Study a detailed list of all transactions</p></li>
<li><p>Get daily statements by email</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
</section>
<section id="examples-of-compute-server-uses">
<h2><a class="toc-backref" href="#id22" role="doc-backlink">Examples of Compute Server Uses</a><a class="headerlink" href="#examples-of-compute-server-uses" title="Link to this heading"></a></h2>
<p>You may find something useful, at least some inspiration, in our growing <a class="reference external" href="https://github.com/sagemathinc/cocalc-howto/blob/main/README.md">collection of tutorials</a> that showcase compute servers. You can simply read them or follow along in video format. Here CoCalc’s CEO and Founder William Stein explains how to run the Google Colab environment on compute servers and use either Tensorflow or PyTorch:</p>
<center><iframe width="640" height="360" src="https://www.youtube.com/embed/kcxyShH3wYE?si=rGZEWZgs6XbOF38u" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe></center>
<br/></section>
<section id="do-i-still-need-a-license">
<h2><a class="toc-backref" href="#id23" role="doc-backlink">Do I Still Need a License?</a><a class="headerlink" href="#do-i-still-need-a-license" title="Link to this heading"></a></h2>
<p>That is a great question! We do not force our users to get a regular license for working with compute servers, but since the CoCalc project is still used for <a class="reference internal" href="#compute-server-filesystem"><span class="std std-ref">file syncing</span></a> and tracking compute server status, you will have smoother experience if your project has member hosting and sufficient RAM. In most cases the <a class="reference external" href="https://cocalc.com/store/site-license?user=academic&amp;period=monthly&amp;run_limit=1&amp;cpu=1&amp;ram=2&amp;disk=3&amp;uptime=short&amp;member=true">basic license</a> with 2 GB RAM, 1 vCPU core, and 3 GB disk will work great!</p>
</section>
<section id="creating-a-compute-server">
<h2><a class="toc-backref" href="#id24" role="doc-backlink">Creating a Compute Server</a><a class="headerlink" href="#creating-a-compute-server" title="Link to this heading"></a></h2>
<p>There are multiple ways to create a compute server, one of them is to click the <strong>Server</strong> button:</p>
<figure class="align-center" id="id5">
<a class="reference internal image-reference" href="_images/compute_server_creating_2.png"><img alt="Creating a Compute Server" src="_images/compute_server_creating_2.png" style="width: 90%;" /></a>
<figcaption>
<p><span class="caption-text">Creating a Compute Server</span><a class="headerlink" href="#id5" title="Link to this image"></a></p>
</figcaption>
</figure>
<p>The first settings allow you to give your server a name, pick a colour to easily distinguish where your are working, and <a class="reference internal" href="#choosing-a-cloud"><span class="std std-ref">choose the cloud provider</span></a> used for your server:</p>
<figure class="align-center" id="id6">
<a class="reference internal image-reference" href="_images/compute_server_create_dialog.png"><img alt="Creating a Compute Server" src="_images/compute_server_create_dialog.png" style="width: 90%;" /></a>
<figcaption>
<p><span class="caption-text">Creating a Compute Server</span><a class="headerlink" href="#id6" title="Link to this image"></a></p>
</figcaption>
</figure>
<div class="admonition hint">
<p class="admonition-title">Hint</p>
<p>You can actually be your own “cloud provider” by picking <strong>On Prem</strong> hosting! You can use not only your own physical hardware, but also virtual machines from providers we are not currently integrated with. This is one of the ways we support <a class="reference internal" href="on-premises.html#on-premises"><span class="std std-ref">On-Premises CoCalc</span></a>.</p>
</div>
<p><strong>Configuration</strong> parameters vary depending on your hosting choice, but typically you can select the desired software image and hardware configuration including GPU(s).</p>
<p>If you are going to write code using CUDA libraries, choose the “Cuda Toolkit” image. If you want to accelerate PyTorch computations with a GPU, choose the “PyTorch” image. If you want to use SageMath, choose the “SageMath” image. Note that image selection does depend on the presence of a GPU.</p>
<p>Adjust the hardware parameters according to your needs. Take some time to look over the options! You will be able to edit CPU and RAM when the machine is off (if it also has a GPU, currently it will have to be deprovisioned), so if you don’t quite know what you need - make a guess! If it turns out that you need something more or less powerful, you can easily make an adjustment. For example, in this video William uses a machine with 60 CPU cores and 240 GB of RAM to build SageMath from source in under 18 minutes:</p>
<center><iframe width="640" height="360" src="https://www.youtube.com/embed/b8e8qq-KWbA?si=Y9N6ZtcVKo3fD9Fn" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe></center><p>After the build is done, William changes the machine type to have only 2 CPU cores and 8 GB of RAM - such a machine is very cheap to run even 24/7! The disk size can be increased even when the machine is running. Unfortunately, you currently can’t move the machine from one region or zone to another unless it is deprovisioned, and the prices do depend on the region - this will change in the future.</p>
<p>Start your compute server!</p>
</section>
<section id="using-a-compute-server">
<h2><a class="toc-backref" href="#id25" role="doc-backlink">Using a Compute Server</a><a class="headerlink" href="#using-a-compute-server" title="Link to this heading"></a></h2>
<p>Your freshly created compute server does <em>not</em> replace your CoCalc project, but rather complements it. This is why you have to explicitly indicate that you want to run your terminal or Jupyter notebook on a particular compute server, and you can have multiple compute servers running at the same time!</p>
<div class="admonition hint">
<p class="admonition-title">Hint</p>
<p>You can get close to a feeling of working “just on a compute server” if you switch to it in the file <strong>Explorer</strong> - you will be able to see its local files and all files that you open will run on the same compute server by default. See <a class="reference internal" href="#compute-server-filesystem"><span class="std std-ref">Compute Server Filesystem</span></a> below.</p>
</div>
<p>To run a Jupyter notebook on a compute server, click the <strong>Server</strong> button and select the one you want to use:</p>
<figure class="align-center" id="id7">
<a class="reference internal image-reference" href="_images/compute_server_notebook.png"><img alt="Connecting a Compute Server to a Notebook" src="_images/compute_server_notebook.png" style="width: 90%;" /></a>
<figcaption>
<p><span class="caption-text">Connecting a Compute Server to a Notebook</span><a class="headerlink" href="#id7" title="Link to this image"></a></p>
</figcaption>
</figure>
<p>You will get a confirmation dialog, reminding you that the current kernel will be stopped and a new one will have to be started on the compute server:</p>
<figure class="align-center" id="id8">
<a class="reference internal image-reference" href="_images/compute_server_confirmation.png"><img alt="Confirming the Choice of a Compute Server" src="_images/compute_server_confirmation.png" style="width: 90%;" /></a>
<figcaption>
<p><span class="caption-text">Confirming the Choice of a Compute Server</span><a class="headerlink" href="#id8" title="Link to this image"></a></p>
</figcaption>
</figure>
<p>It is possible that the type of kernel used in your notebook is not available on the compute server (and vice versa). In this case you will need to choose another one:</p>
<figure class="align-center" id="id9">
<a class="reference internal image-reference" href="_images/compute_server_kernel.png"><img alt="Picking a Kernel on a Compute Server" src="_images/compute_server_kernel.png" style="width: 90%;" /></a>
<figcaption>
<p><span class="caption-text">Picking a Kernel on a Compute Server</span><a class="headerlink" href="#id9" title="Link to this image"></a></p>
</figcaption>
</figure>
<p>The server bar appearing above the notebook allows you to quickly see where the notebook is running and shows the name you have given to this server, its unique ID, and the image used. Click on this bar to see more details about the server:</p>
<figure class="align-center" id="id10">
<a class="reference internal image-reference" href="_images/compute_server_status.png"><img alt="Compute Server Status" src="_images/compute_server_status.png" style="width: 90%;" /></a>
<figcaption>
<p><span class="caption-text">Compute Server Status</span><a class="headerlink" href="#id10" title="Link to this image"></a></p>
</figcaption>
</figure>
<p>In order to use the Linux command line, e.g., compilers, etc., create a terminal file (one ending in .term) and connect it to a compute server in the same way. If you chose the “CUDA Toolkit” image, then the <code class="docutils literal notranslate"><span class="pre">nvcc</span></code> command will be available for compiling <code class="docutils literal notranslate"><span class="pre">.cu</span></code> code. See <a class="reference external" href="https://github.com/sagemathinc/cocalc-howto/blob/main/cuda.md">this tutorial</a> for details.</p>
</section>
<section id="becoming-root-and-port-forwarding">
<h2><a class="toc-backref" href="#id26" role="doc-backlink">Becoming root and Port Forwarding</a><a class="headerlink" href="#becoming-root-and-port-forwarding" title="Link to this heading"></a></h2>
<p>You cannot become <code class="docutils literal notranslate"><span class="pre">root</span></code> or use <code class="docutils literal notranslate"><span class="pre">sudo</span></code> inside of a CoCalc project. If you try to, you will get a message like</p>
<figure class="align-center" id="id11">
<a class="reference internal image-reference" href="_images/no_sudo.png"><img alt="Error Message Using sudo" src="_images/no_sudo.png" style="width: 90%;" /></a>
<figcaption>
<p><span class="caption-text">Error Message Using sudo</span><a class="headerlink" href="#id11" title="Link to this image"></a></p>
</figcaption>
</figure>
<p>On a compute server it is fully possible, just make sure that your terminal is running on a compute server as explained above:</p>
<figure class="align-center" id="id12">
<a class="reference internal image-reference" href="_images/compute_server_sudo.png"><img alt="Using sudo on a Compute Server" src="_images/compute_server_sudo.png" style="width: 90%;" /></a>
<figcaption>
<p><span class="caption-text">Using sudo on a Compute Server</span><a class="headerlink" href="#id12" title="Link to this image"></a></p>
</figcaption>
</figure>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Since you can do anything as <code class="docutils literal notranslate"><span class="pre">root</span></code>, you may accidentally lose access to your compute server and your data. If this happens and you do need to regain access to data, contact support at <a class="reference external" href="mailto:help&#37;&#52;&#48;cocalc&#46;com">help<span>&#64;</span>cocalc<span>&#46;</span>com</a></p>
</div>
<p>When you become <code class="docutils literal notranslate"><span class="pre">root</span></code> as above, you are still inside of a Docker container that is closely integrated with CoCalc. If this creates problems for your use case, you can escape from it and become <code class="docutils literal notranslate"><span class="pre">root</span></code> on the actual virtual machine that represents your compute server. To do this, <a class="reference internal" href="account/ssh.html#account-ssh"><span class="std std-ref">add SSH keys to your account</span></a> (or project). Then use SSH to connect as <code class="docutils literal notranslate"><span class="pre">root</span></code> to <code class="docutils literal notranslate"><span class="pre">localhost</span></code>:</p>
<figure class="align-center" id="id13">
<a class="reference internal image-reference" href="_images/compute_server_escape.png"><img alt="Escape from the Compute Server Container" src="_images/compute_server_escape.png" style="width: 90%;" /></a>
<figcaption>
<p><span class="caption-text">Escape from the Compute Server Container</span><a class="headerlink" href="#id13" title="Link to this image"></a></p>
</figcaption>
</figure>
<p>Alternatively, you can use the external IP address of your compute server to connect to it from <em>any other machine</em>, bypassing CoCalc. This address is on the top of information about the server:</p>
<figure class="align-center" id="id14">
<a class="reference internal image-reference" href="_images/compute_server_direct_connect.png"><img alt="Compute Server IP Address" src="_images/compute_server_direct_connect.png" style="width: 90%;" /></a>
<figcaption>
<p><span class="caption-text">Compute Server IP Address</span><a class="headerlink" href="#id14" title="Link to this image"></a></p>
</figcaption>
</figure>
<p>The same address can be used to gain access to services. If any software on your compute server instructs you to “go to <code class="docutils literal notranslate"><span class="pre">http://localhost:8123</span></code>”, execute</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>ssh -L 8123:localhost:8123 root@[server address]
</pre></div>
</div>
<p>on your <em>local</em> computer and go to <code class="docutils literal notranslate"><span class="pre">http://localhost:8123</span></code> in your <em>local</em> browser.</p>
</section>
<section id="billing-for-a-compute-server">
<h2><a class="toc-backref" href="#id27" role="doc-backlink">Billing for a Compute Server</a><a class="headerlink" href="#billing-for-a-compute-server" title="Link to this heading"></a></h2>
<p>A compute server is billed by the second and the price depends on its state:</p>
<ul class="simple">
<li><p><strong>Running</strong> - the server is ready to perform your tasks, you pay for all of its resources and this is the price shown when creating a server</p></li>
<li><p><strong>Suspended</strong> - this is an analog of closing your laptop lid, you pay for the disk space and storing RAM state, but not for CPUs (compute servers with GPUs cannot be suspended)</p></li>
<li><p><strong>Off</strong> - this is an analog of shutting down your laptop, you pay only for the disk space and local data is available to you when you start the server again</p></li>
<li><p><strong>Deprovisioned</strong> - this is like writing down the model number of your laptop on paper, it costs nothing and when you start the server it will have the same characteristics, but all data that was not synced to your CoCalc project is gone.</p></li>
</ul>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Please note that <em>there is</em> still a charge in the <strong>Off</strong> state! Namely the cost of the disk. Typically it is much less than the cost while <strong>Running</strong>, but it depends on your precise configuration.</p>
</div>
<div class="admonition hint">
<p class="admonition-title">Hint</p>
<p>If you do not store local data on your server and do not customize the software environment, use the <strong>Deprovisioned</strong> state. You can make it the default using <strong>Ephemeral Disk</strong> setting in the server configuration.</p>
</div>
<p>In the example below the running cost is $0.30/hour while the disk cost is less than a penny! Notice the extra zero in $0.004 that appears when you hover over the <strong>Stop</strong> button (hovering over the cost per hour will also show the cost per month):</p>
<figure class="align-center" id="id15">
<a class="reference internal image-reference" href="_images/compute_server_cost.png"><img alt="Compute Server Cost" src="_images/compute_server_cost.png" style="width: 90%;" /></a>
<figcaption>
<p><span class="caption-text">Compute Server Cost</span><a class="headerlink" href="#id15" title="Link to this image"></a></p>
</figcaption>
</figure>
</section>
<section id="compute-server-filesystem">
<span id="id2"></span><h2><a class="toc-backref" href="#id28" role="doc-backlink">Compute Server Filesystem</a><a class="headerlink" href="#compute-server-filesystem" title="Link to this heading"></a></h2>
<p>In order to smoothly and successfully use a compute server, it is essential to understand how its filesystem interacts with your CoCalc project.</p>
<p>For the most part, all files in your CoCalc project conveniently appear in your home folder on the compute server and you can use them in a regular way. File changes inside of your CoCalc project and on your compute server can be synced both ways. This works great for Jupyter notebooks, for example. However, this convenience is still bound by laws of physics and because of network transfers involved it is much slower than modern local disks. You are also limited by your CoCalc disk quota.</p>
<p>If you need to read or write massive amounts of data, e.g. for data science or machine learning, or the programs you are running operate with a lot of files, e.g. <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">status</span></code> with a large repository, you do need to use local fast directories on your compute server. These directories are configured in the compute server settings when you create or edit one:</p>
<figure class="align-center" id="id16">
<a class="reference internal image-reference" href="_images/compute_server_fast_data.png"><img alt="Fast Data Directories" src="_images/compute_server_fast_data.png" style="width: 80%;" /></a>
<figcaption>
<p><span class="caption-text">Fast Data Directories</span><a class="headerlink" href="#id16" title="Link to this image"></a></p>
</figcaption>
</figure>
<p>As intended, these directories are <em>NOT</em> visible in your CoCalc project:</p>
<figure class="align-center" id="id17">
<a class="reference internal image-reference" href="_images/compute_server_project_files.png"><img alt="File Explorer on Project" src="_images/compute_server_project_files.png" style="width: 80%;" /></a>
<figcaption>
<p><span class="caption-text">File Explorer on Project</span><a class="headerlink" href="#id17" title="Link to this image"></a></p>
</figcaption>
</figure>
<p>In order to see them, to open files in them, or to open even synced files on the compute server without extra steps, connect your file explorer to the compute server in the same way as with notebooks and terminals, using the <strong>Server</strong> button. Now the fast data directories are visible (you can certainly have more than one):</p>
<figure class="align-center" id="id18">
<a class="reference internal image-reference" href="_images/compute_server_files.png"><img alt="File Explorer on Compute Server" src="_images/compute_server_files.png" style="width: 80%;" /></a>
<figcaption>
<p><span class="caption-text">File Explorer on Compute Server</span><a class="headerlink" href="#id18" title="Link to this image"></a></p>
</figcaption>
</figure>
<p>When you edit files via CoCalc graphical interface, they are usually synced between the project and the compute server automatically. However, if you are using <code class="docutils literal notranslate"><span class="pre">vim</span></code> or some other tool in a terminal, or just want the files to be synced immediately, you may need to click the <strong>Sync Files</strong> button:</p>
<figure class="align-center" id="id19">
<a class="reference internal image-reference" href="_images/compute_server_sync_files.png"><img alt="Sync Files Button for a Compute Server" src="_images/compute_server_sync_files.png" style="width: 80%;" /></a>
<figcaption>
<p><span class="caption-text">Sync Files Button for a Compute Server</span><a class="headerlink" href="#id19" title="Link to this image"></a></p>
</figcaption>
</figure>
</section>
<section id="compute-server-vpn">
<h2><a class="toc-backref" href="#id29" role="doc-backlink">Compute Server VPN</a><a class="headerlink" href="#compute-server-vpn" title="Link to this heading"></a></h2>
<p>In addition to Internet access using standard tools, your compute servers <em>in the same project</em> can communicate with each other over encrypted VPN. You can refer to your servers either using <code class="docutils literal notranslate"><span class="pre">compute-server-nnnn</span></code> names or, if you have configured a subdomain <code class="docutils literal notranslate"><span class="pre">https://server_name.cocalc.cloud</span></code>, using <code class="docutils literal notranslate"><span class="pre">server_name</span></code>. Here is quick example of a terminal session on a compute server:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>(compute-server-1268) ~$ more /etc/hosts
...
### COCALC VPN -- EVERYTHING BELOW IS AUTOGENERATED -- DO NOT EDIT
10.11.12.242 compute-server-1268
10.202.0.87 internal-1268
34.162.173.49 external-1268
10.11.211.165 compute-server-4300
10.11.211.165 fire
10.0.3.110 internal-4300
149.36.0.137 external-4300
(compute-server-1268) ~$ sudo apt install -y iputils-ping
...
(compute-server-1268) ~$ ping compute-server-4300
PING compute-server-4300 (10.11.211.165) 56(84) bytes of data.
64 bytes from compute-server-4300 (10.11.211.165): icmp_seq=1 ttl=64 time=231 ms
64 bytes from compute-server-4300 (10.11.211.165): icmp_seq=2 ttl=64 time=114 ms
...
(compute-server-1268) ~$ ping fire
PING fire (10.11.211.165) 56(84) bytes of data.
64 bytes from compute-server-4300 (10.11.211.165): icmp_seq=1 ttl=64 time=114 ms
64 bytes from compute-server-4300 (10.11.211.165): icmp_seq=2 ttl=64 time=114 ms
...
</pre></div>
</div>
<p>All traffic is fully encrypted and all ports are open, so you have complete freedom in configuring services that run over this VPN. IP addresses of the form <code class="docutils literal notranslate"><span class="pre">10.11.x.x</span></code> remain fixed for the lifetime of the compute server.</p>
<p>Current limitations (that may be removed in the future):</p>
<ul class="simple">
<li><p>the CoCalc project itself is <em>not</em> on this VPN</p></li>
<li><p>you can connect from any to any server, mixing different clouds and on prem, <em>except</em> two on prem servers</p></li>
<li><p>when you create a new server or configure a domain name for an existing one, you may need to <em>wait a few seconds</em> before the new name will become resolvable</p></li>
</ul>
</section>
<section id="choosing-a-cloud">
<span id="id3"></span><h2><a class="toc-backref" href="#id30" role="doc-backlink">Choosing a Cloud</a><a class="headerlink" href="#choosing-a-cloud" title="Link to this heading"></a></h2>
<p>It is impossible to choose “the best cloud” for compute servers overall, which is why CoCalc integrates with many of them! For each particular use case one may be more or less preferable - sometimes it may be obvious, sometimes it requires experimentation, and sometimes the difference is inconsequential. The purpose of this section is to highlight some points to consider when choosing a cloud, hopefully it will make this task easier for you.</p>
<section id="cost">
<h3><a class="toc-backref" href="#id31" role="doc-backlink">Cost</a><a class="headerlink" href="#cost" title="Link to this heading"></a></h3>
<p>This may be the most obvious criterion, but while we strive to be as transparent as possible with the cost of running a compute server, do keep in mind also that:</p>
<ul class="simple">
<li><p>there is a cost for the disk space when the server is off;</p></li>
<li><p>there may be some charge for network traffic, typically it is small compared to compute resources, but it does depend on your use case;</p></li>
<li><p>it may be more cost effective to use a configuration that is more expensive <em>per hour</em> if it allows you to complete your computations faster, thus paying for fewer hours.</p></li>
</ul>
</section>
<section id="availability">
<h3><a class="toc-backref" href="#id32" role="doc-backlink">Availability</a><a class="headerlink" href="#availability" title="Link to this heading"></a></h3>
<p>This one may be less obvious than the cost, but it is even more important - the price of a compute server does not matter if you cannot start it! In most cases once you managed to start a compute server, you can continue using it until you explicitly turn it off. However, there is no guarantee that you will be able to start the same machine again in a few days - other users may utilize all resources.</p>
</section>
<section id="geographic-location">
<h3><a class="toc-backref" href="#id33" role="doc-backlink">Geographic Location</a><a class="headerlink" href="#geographic-location" title="Link to this heading"></a></h3>
<p>Your organization may impose strict requirements on where your data are stored and processed. Other factors to consider:</p>
<ul class="simple">
<li><p>latency for interactive work: a server close to you may be best if you directly use web services started on it, while <code class="docutils literal notranslate"><span class="pre">us-east1-d</span></code> may be optimal to use CoCalc editors;</p></li>
<li><p>some “remote” regions may have attractive cost and/or availability;</p></li>
<li><p>network speed and cost, if you expect a lot of traffic.</p></li>
</ul>
</section>
<section id="special-considerations">
<h3><a class="toc-backref" href="#id34" role="doc-backlink">Special Considerations</a><a class="headerlink" href="#special-considerations" title="Link to this heading"></a></h3>
<p>You may want to use a data centre satisfying particular requirements on sustainability, security, etc. We try to expose as much information about our cloud providers as possible to help our users to make an informed choice.</p>
<p>Let’s take a look now at some of the unique benefits of our cloud providers!</p>
</section>
<section id="google">
<h3><a class="toc-backref" href="#id35" role="doc-backlink">Google</a><a class="headerlink" href="#google" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p>Vast selection of varied configurations!</p></li>
<li><p>For computationally intensive tasks, do take a look at higher end machines. We had customers with very strict requirements on interconnect network between cluster nodes, but it turned out that Google had single nodes with enough vCPUs, eliminating the need for a cluster setup!</p></li>
<li><p>Spot instances offer up to 10x lower prices, if your work can deal with potential interruptions!</p></li>
</ul>
</section>
<section id="hyperstack">
<h3><a class="toc-backref" href="#id36" role="doc-backlink">Hyperstack</a><a class="headerlink" href="#hyperstack" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p>Apart from cost and speed, Hyperstack prioritizes sustainability of their data centres. They are 100% powered by hydro-electricity and are located in Canada and Norway to benefit from lower ambient temperature for air cooling.</p></li>
<li><p>You can see how many GPUs are available on Hyperstack at any given time and estimate your chances of being able to get what you need in the future.</p></li>
</ul>
</section>
<section id="on-prem">
<h3><a class="toc-backref" href="#id37" role="doc-backlink">On Prem</a><a class="headerlink" href="#on-prem" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p>You are in full control of the machine you are using.</p></li>
<li><p>At the moment On Prem compute servers are free, the intended cost when their development is finished is about 1/3 of a similar spot instance on Google. If you <em>already own</em> sufficient compute resources, this may be the most cost-effective option to benefit from the cloud and collaboration as well!</p></li>
</ul>
</section>
</section>
<section id="teaching-with-compute-servers">
<span id="id4"></span><h2><a class="toc-backref" href="#id38" role="doc-backlink">Teaching with Compute Servers</a><a class="headerlink" href="#teaching-with-compute-servers" title="Link to this heading"></a></h2>
<p>Compute servers are a great option to let your students or workshop participants use GPUs or powerful compute resources! Some important points to consider ahead of the course start:</p>
<ul>
<li><p>What configuration do you need for your students?</p></li>
<li><p>How will you communicate it to them so that they don’t miss important settings? (We do plan to support sharing server configuration directly, but it is not implemented yet.)</p></li>
<li><p>Who will pay for running compute servers? The cost will be deducted directly from student accounts, but you can provide them with <a class="reference internal" href="vouchers.html#credit-vouchers"><span class="std std-ref">CoCalc Credit Vouchers</span></a> if you wish, paying for those yourself.</p></li>
<li><p>If you do use vouchers, you will need to figure out a suitable amount and, perhaps, develop a policy for those who run out of credit. For example, students may forget to turn off their servers when they are done working. It is also theoretically possible for them to configure a much more powerful machine than needed/instructed.</p></li>
<li><p>Note that students can not spend more than they have in their account, so the worst case scenario is: they “burn” their allotment because of some mistake, put the same amount of money again, and hopefully behave in a more responsible manner the second time.</p></li>
<li><p>For smaller courses it may be feasible for the instructor to create a server in each student project and allow collaborators (which includes students) to control it, i.e. they will be able to start and stop it:</p>
<figure class="align-center" id="id20">
<a class="reference internal image-reference" href="_images/allow_collaborator_control.png"><img alt="Allow Collaborator Control" src="_images/allow_collaborator_control.png" style="width: 80%;" /></a>
<figcaption>
<p><span class="caption-text">Allow Collaborator Control</span><a class="headerlink" href="#id20" title="Link to this image"></a></p>
</figcaption>
</figure>
<p>In this case usage bills to the instructor account without any need for vouchers. Since the students can’t edit the configuration of such a server, the worst case for an improper use is leaving the server running all the time.</p>
</li>
</ul>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="licenses.html" class="btn btn-neutral float-left" title="Licenses" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="paygo.html" class="btn btn-neutral float-right" title="Pay-As-You-Go Purchase" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024, Sagemath, Inc., CC BY-4.0 licensed.</p>
  </div>

  

<div role="contentinfo">
  <p>
    Please contact us for <a href="https://cocalc.com/support/new?type=question&subject=A%20question%20about%20CoCalc%20...&body=&title=Ask%20us%20a%20Question!">Questions and Feedback</a>,
    <a href="https://github.com/sagemathinc/cocalc-doc/">Documentation Repository</a>,
    <a href="https://cocalc.com/policies/">Privacy Policy and ToS</a>.
   </p>
   <p>
    <a href="https://github.com/sagemathinc/cocalc-doc/edit/master/source/compute_server.rst" class="fa fa-github"> Edit this page on GitHub</a>
  </p>
  <p>
    <strong><a href="https://cocalc.com/app">Start CoCalc</a></strong> – start free, upgrade later!
  </p>
</div>


</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>
   
  <a class="github cocalcbanner" href="https://cocalc.com/app?anonymous=true">
     <img alt="Start CoCalc"
          class="github"
          src="_static/start-cocalc.png"
          style="position: fixed; top: 0; right: 0; border: 0; height: 75px; width: 75px">
  </a>


</body>
</html>
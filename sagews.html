
<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Sage Worksheets &mdash; CoCalc Manual  documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=fa44fd50" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=19f00094" />

  
    <link rel="shortcut icon" href="_static/favicon-32x32.png"/>
    <link rel="canonical" href="https://doc.cocalc.com/sagews.html" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="_static/jquery.js?v=5d32c60e"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="_static/documentation_options.js?v=5929fcd5"></script>
        <script src="_static/doctools.js?v=9a2dae69"></script>
        <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
        <script src="https://cocalc.com/analytics.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Markdown" href="markdown.html" />
    <link rel="prev" title="Graphical Applications" href="x11.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
    <link rel="canonical" href="https://doc.cocalc.com/sagews.html"/>
  

</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

<a href="index.html" class="icon icon-home"> CoCalc Manual
  <img src="_static/_static/cocalc-doc-logo.svg" class="logo" alt="Logo"/>
</a>


<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>


        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="introduction.html">Introduction</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="working_with.html">Working With</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="ai.html">AI Assistant</a></li>
<li class="toctree-l2"><a class="reference internal" href="frame-editor.html">Frame Editor</a></li>
<li class="toctree-l2"><a class="reference internal" href="jupyter.html">Jupyter Notebooks</a></li>
<li class="toctree-l2"><a class="reference internal" href="terminal.html">Linux Terminal</a></li>
<li class="toctree-l2"><a class="reference internal" href="latex.html">LaTeX Editor</a></li>
<li class="toctree-l2"><a class="reference internal" href="vscode.html">Visual Studio Code Server</a></li>
<li class="toctree-l2"><a class="reference internal" href="chat.html">Chatrooms</a></li>
<li class="toctree-l2"><a class="reference internal" href="x11.html">Graphical Applications</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Sage Worksheets</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#introduction">Introduction</a></li>
<li class="toctree-l3"><a class="reference internal" href="#what-s-a-sage-worksheet">What’s a Sage Worksheet?</a></li>
<li class="toctree-l3"><a class="reference internal" href="#how-to-revert-undo-changes-in-a-sage-worksheet">How to Revert/Undo Changes in a Sage Worksheet</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#timetravel">TimeTravel</a></li>
<li class="toctree-l4"><a class="reference internal" href="#backups-snapshots">Backups (snapshots)</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#help-for-programmers">Help for Programmers</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#chatgpt-help-understanding-errors">ChatGPT help understanding errors</a></li>
<li class="toctree-l4"><a class="reference internal" href="#understanding-error-messages">Understanding Error Messages</a></li>
<li class="toctree-l4"><a class="reference internal" href="#extended-documentation">Extended Documentation</a></li>
<li class="toctree-l4"><a class="reference internal" href="#concise-documentation">Concise Documentation</a></li>
<li class="toctree-l4"><a class="reference internal" href="#source-code">Source Code</a></li>
<li class="toctree-l4"><a class="reference internal" href="#tab-completion">Tab Completion</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#sage-worksheet-slow-when-plotting-disable-svg">Sage Worksheet Slow When Plotting? Disable svg.</a></li>
<li class="toctree-l3"><a class="reference internal" href="#how-long-are-definitions-stored-in-a-sage-worksheet">How Long are Definitions Stored in a Sage Worksheet?</a></li>
<li class="toctree-l3"><a class="reference internal" href="#wiki-resources">Wiki resources</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#sagews-wiki">Sage Worksheets</a></li>
<li class="toctree-l4"><a class="reference internal" href="#conversion-utilities">Conversion utilities</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#help-about-sagemath">Help about SageMath</a></li>
<li class="toctree-l3"><a class="reference internal" href="#howto">Howto</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#attach-sage-files-to-sage-worksheets">Attach Sage files to Sage Worksheets</a></li>
<li class="toctree-l4"><a class="reference internal" href="#connect-an-html-form-with-python-code">Connect an HTML form with Python code</a></li>
<li class="toctree-l4"><a class="reference internal" href="#play-sounds">Play sounds</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="markdown.html">Markdown</a></li>
<li class="toctree-l2"><a class="reference internal" href="rich-text.html">Rich Text Editing</a></li>
<li class="toctree-l2"><a class="reference internal" href="csv-viewer.html">CSV Viewer</a></li>
<li class="toctree-l2"><a class="reference internal" href="whiteboard.html">Whiteboard</a></li>
<li class="toctree-l2"><a class="reference internal" href="tasks.html">Task Lists</a></li>
<li class="toctree-l2"><a class="reference internal" href="timers.html">Stopwatches and Timers</a></li>
<li class="toctree-l2"><a class="reference internal" href="slides.html">Slides</a></li>
<li class="toctree-l2"><a class="reference internal" href="snippets.html">Snippets</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="platform.html">Platform</a></li>
<li class="toctree-l1"><a class="reference internal" href="user_interface.html">User Interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="service_options.html">Service Options</a></li>
<li class="toctree-l1"><a class="reference internal" href="teaching-instructors.html">Instructor Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="teaching-students.html">Student Guide</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Appendix</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="references.html">References</a></li>
<li class="toctree-l1"><a class="reference internal" href="genindex.html">Index</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
  <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
  <a href="index.html">CoCalc Manual</a>

      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="contents.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="working_with.html">Working With</a></li>
      <li class="breadcrumb-item active">Sage Worksheets</li>
<li class="wy-breadcrumbs-aside" style="padding: 0;">
  <a
    class="fa fa-question-circle"
    href="https://cocalc.com/support/new?type=question&subject=A%20question%20about%20CoCalc%20...&body=&title=Ask%20us%20a%20Question!"
    style="background-color: #daeefb; color: black; border: 3px solid #2980b9; padding: 2px 5px; border-radius: 4px;"
  >
    Ask us a Question!
  </a>
</li>

  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="sage-worksheets">
<span id="sage-worksheet"></span><span id="index-0"></span><h1>Sage Worksheets<a class="headerlink" href="#sage-worksheets" title="Link to this heading"></a></h1>
<nav class="contents local" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#introduction" id="id8">Introduction</a></p></li>
<li><p><a class="reference internal" href="#what-s-a-sage-worksheet" id="id9">What’s a Sage Worksheet?</a></p></li>
<li><p><a class="reference internal" href="#how-to-revert-undo-changes-in-a-sage-worksheet" id="id10">How to Revert/Undo Changes in a Sage Worksheet</a></p>
<ul>
<li><p><a class="reference internal" href="#timetravel" id="id11">TimeTravel</a></p></li>
<li><p><a class="reference internal" href="#backups-snapshots" id="id12">Backups (snapshots)</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#help-for-programmers" id="id13">Help for Programmers</a></p>
<ul>
<li><p><a class="reference internal" href="#chatgpt-help-understanding-errors" id="id14">ChatGPT help understanding errors</a></p></li>
<li><p><a class="reference internal" href="#understanding-error-messages" id="id15">Understanding Error Messages</a></p></li>
<li><p><a class="reference internal" href="#extended-documentation" id="id16">Extended Documentation</a></p></li>
<li><p><a class="reference internal" href="#concise-documentation" id="id17">Concise Documentation</a></p></li>
<li><p><a class="reference internal" href="#source-code" id="id18">Source Code</a></p></li>
<li><p><a class="reference internal" href="#tab-completion" id="id19">Tab Completion</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#sage-worksheet-slow-when-plotting-disable-svg" id="id20">Sage Worksheet Slow When Plotting? Disable svg.</a></p></li>
<li><p><a class="reference internal" href="#how-long-are-definitions-stored-in-a-sage-worksheet" id="id21">How Long are Definitions Stored in a Sage Worksheet?</a></p></li>
<li><p><a class="reference internal" href="#wiki-resources" id="id22">Wiki resources</a></p>
<ul>
<li><p><a class="reference internal" href="#sagews-wiki" id="id23">Sage Worksheets</a></p></li>
<li><p><a class="reference internal" href="#conversion-utilities" id="id24">Conversion utilities</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#help-about-sagemath" id="id25">Help about SageMath</a></p></li>
<li><p><a class="reference internal" href="#howto" id="id26">Howto</a></p>
<ul>
<li><p><a class="reference internal" href="#attach-sage-files-to-sage-worksheets" id="id27">Attach Sage files to Sage Worksheets</a></p></li>
<li><p><a class="reference internal" href="#connect-an-html-form-with-python-code" id="id28">Connect an HTML form with Python code</a></p></li>
<li><p><a class="reference internal" href="#play-sounds" id="id29">Play sounds</a></p></li>
</ul>
</li>
</ul>
</nav>
<section id="introduction">
<h2><a class="toc-backref" href="#id8" role="doc-backlink">Introduction</a><a class="headerlink" href="#introduction" title="Link to this heading"></a></h2>
<p>Sage Worksheets were developed for collaborative, notebook-style computing with <a class="reference external" href="https://www.sagemath.org">SageMath</a> on the <a class="reference external" href="https://cocalc.com">CoCalc</a> platform. Like Jupyter Notebooks, Sage Worksheets support many programming environments. More than one language environment can be used in the same Sage Worksheet.</p>
<p>Note: in the CoCalc User Manual, we will generally use the term <em>SageMath</em> to refer to the <a class="reference external" href="https://www.sagemath.org">open source mathematical system</a> that runs on CoCalc and in many other environments. Elsewhere, you may see it referred to simply as <em>Sage</em>.</p>
<p>In CoCalc, there are at least three ways to run SageMath:</p>
<ul class="simple">
<li><p>in a Sage Worksheet</p></li>
<li><p>in a Jupyter Notebook</p></li>
<li><p>from the command line in a terminal</p></li>
</ul>
</section>
<section id="what-s-a-sage-worksheet">
<span id="what-is-sagews"></span><h2><a class="toc-backref" href="#id9" role="doc-backlink">What’s a Sage Worksheet?</a><a class="headerlink" href="#what-s-a-sage-worksheet" title="Link to this heading"></a></h2>
<p>A Sage Worksheet is a file ending in <code class="docutils literal notranslate"><span class="pre">.sagews</span></code> and is subdivided into cells. Each cell has an input region and an output region, which might be 0, 1, 2, or many lines long.</p>
<p>The input can be mathematical, in the Sage syntax, or it could be in many other formats, including <a class="reference internal" href="markdown.html"><span class="doc">Markdown</span></a>, HTML, Python 2 or 3, and R. To use a format other than Sage syntax, start the cell with a mode directive such ss “%md” for markdown. See this <a class="reference external" href="https://blog.cocalc.com/smc/2016/08/08/custom-magic-commands.html">CoCalc blog article</a> for more information about built-in and custom sagews modes.</p>
<p>When you <em>run</em> a cell, by clicking <code class="docutils literal notranslate"><span class="pre">Run</span></code> or typing <code class="docutils literal notranslate"><span class="pre">Shift-Enter</span></code>, the input is executed (or formatted, for text processing). The result appears in the output after the calculation is done.</p>
<p>To begin work on a Sage Worksheet, create a file ending with <code class="docutils literal notranslate"><span class="pre">.sagews</span></code>.</p>
<figure class="align-center" id="id2">
<a class="reference internal image-reference" href="_images/sagews-example.png"><img alt="example sage worksheet" src="_images/sagews-example.png" style="width: 90%;" /></a>
<figcaption>
<p><span class="caption-text"><em>example of a Sage Worksheet</em></span><a class="headerlink" href="#id2" title="Link to this image"></a></p>
</figcaption>
</figure>
</section>
<section id="how-to-revert-undo-changes-in-a-sage-worksheet">
<h2><a class="toc-backref" href="#id10" role="doc-backlink">How to Revert/Undo Changes in a Sage Worksheet</a><a class="headerlink" href="#how-to-revert-undo-changes-in-a-sage-worksheet" title="Link to this heading"></a></h2>
<p>For tiny changes, control+Z (or command+Z on a mac) will give you an instantaneous undo.</p>
<p>When it comes to undoing larger changes, one of the most useful things about CoCalc is that it will keep all versions of all of your files. This means that you can revert back to previous versions easily.</p>
<section id="timetravel">
<span id="index-1"></span><h3><a class="toc-backref" href="#id11" role="doc-backlink">TimeTravel</a><a class="headerlink" href="#timetravel" title="Link to this heading"></a></h3>
<p>From any worksheet, click on TimeTravel.</p>
<figure class="align-center">
<a class="reference internal image-reference" href="_images/sagews-example-tt.png"><img alt="TimeTravel button" src="_images/sagews-example-tt.png" style="width: 30%;" /></a>
</figure>
<p>Using the slider, look at all the versions. Find the revision that you want and then click “Revert live version to this.”</p>
<figure class="align-center" id="id3">
<a class="reference internal image-reference" href="_images/sagews-timetravel-a.png"><img alt="TimeTravel controls" src="_images/sagews-timetravel-a.png" style="width: 100%;" /></a>
<figcaption>
<p><span class="caption-text"><em>looking at a Sage Worksheet with TimeTravel</em></span><a class="headerlink" href="#id3" title="Link to this image"></a></p>
</figcaption>
</figure>
</section>
<section id="backups-snapshots">
<span id="index-2"></span><h3><a class="toc-backref" href="#id12" role="doc-backlink">Backups (snapshots)</a><a class="headerlink" href="#backups-snapshots" title="Link to this heading"></a></h3>
<p>For a list of snapshots taken by CoCalc, use the <code class="docutils literal notranslate"><span class="pre">Backups</span></code> button from the TimeTravel view or the Files list. Note that these backups are read-only. If you want to continue working on a file from a snapshot in Backups, you will need to copy it into a writable folder in your project.</p>
</section>
</section>
<section id="help-for-programmers">
<h2><a class="toc-backref" href="#id13" role="doc-backlink">Help for Programmers</a><a class="headerlink" href="#help-for-programmers" title="Link to this heading"></a></h2>
<section id="chatgpt-help-understanding-errors">
<span id="sagews-chatgpt"></span><h3><a class="toc-backref" href="#id14" role="doc-backlink">ChatGPT help understanding errors</a><a class="headerlink" href="#chatgpt-help-understanding-errors" title="Link to this heading"></a></h3>
<p>When sage reports an error, a “Help me fix this…” button appears in the cell output:</p>
<figure class="align-center">
<a class="reference internal image-reference" href="_images/sagews-help-0.png"><img alt="stacktrace from an error" src="_images/sagews-help-0.png" style="width: 100%;" /></a>
</figure>
<p>When you click the button, <a class="reference internal" href="chatgpt.html"><span class="doc">ChatGPT</span></a> will open a side chat panel. After a few seconds, an explanation of the error will appear. <strong>You can reply to ChatGPT in the chat panel if you have more questions after the initial explanation.</strong>:</p>
<figure class="align-center" id="id4">
<a class="reference internal image-reference" href="_images/sagews-help-1.png"><img alt="stacktrace from an error" src="_images/sagews-help-1.png" style="width: 100%;" /></a>
<figcaption>
<p><span class="caption-text">side chat opened by ChatGPT</span><a class="headerlink" href="#id4" title="Link to this image"></a></p>
</figcaption>
</figure>
<p>Context for the explanation is created but is initially hidden behind a disclosure triangle. Clicking the triangle will show you the context:</p>
<figure class="align-center" id="id5">
<a class="reference internal image-reference" href="_images/sagews-help-2.png"><img alt="stacktrace from an error" src="_images/sagews-help-2.png" style="width: 90%;" /></a>
<figcaption>
<p><span class="caption-text">last line of stacktrace has clue to error</span><a class="headerlink" href="#id5" title="Link to this image"></a></p>
</figcaption>
</figure>
</section>
<section id="understanding-error-messages">
<h3><a class="toc-backref" href="#id15" role="doc-backlink">Understanding Error Messages</a><a class="headerlink" href="#understanding-error-messages" title="Link to this heading"></a></h3>
<p><em>Question: I did xyz and now I have this huge error message! Why?</em></p>
<p>Often when SageMath encounters an error, a long error message appears. This output is called a “stack trace” and it can be very useful to experienced programmers. However, often it is enough to <strong>look at the last line of the error message</strong> to understand what has gone wrong.</p>
<figure class="align-center" id="id6">
<a class="reference internal image-reference" href="_images/sagews-stacktrace.png"><img alt="stacktrace from an error" src="_images/sagews-stacktrace.png" style="width: 100%;" /></a>
<figcaption>
<p><span class="caption-text">last line of stacktrace has clue to error</span><a class="headerlink" href="#id6" title="Link to this image"></a></p>
</figcaption>
</figure>
</section>
<section id="extended-documentation">
<h3><a class="toc-backref" href="#id16" role="doc-backlink">Extended Documentation</a><a class="headerlink" href="#extended-documentation" title="Link to this heading"></a></h3>
<p>To see verbose documentation for language features, including commands, methods, and attributes, <strong>use the ``help()`` function</strong>.</p>
<figure class="align-center">
<a class="reference internal image-reference" href="_images/sagews-help.png"><img alt="help() for sagews topics" src="_images/sagews-help.png" style="width: 70%;" /></a>
</figure>
</section>
<section id="concise-documentation">
<h3><a class="toc-backref" href="#id17" role="doc-backlink">Concise Documentation</a><a class="headerlink" href="#concise-documentation" title="Link to this heading"></a></h3>
<p>To see concise documentation (docstrings) for language features, attributes, <strong>append a single question mark</strong> and run the cell. This information is similar to what you get with <code class="docutils literal notranslate"><span class="pre">help()</span></code>.</p>
<figure class="align-center">
<a class="reference internal image-reference" href="_images/sagews-1q.png"><img alt="concise documentation with single question mark" src="_images/sagews-1q.png" style="width: 70%;" /></a>
</figure>
</section>
<section id="source-code">
<h3><a class="toc-backref" href="#id18" role="doc-backlink">Source Code</a><a class="headerlink" href="#source-code" title="Link to this heading"></a></h3>
<p>To see source code for language features, <strong>append two question marks</strong> and run the cell.</p>
<figure class="align-center">
<a class="reference internal image-reference" href="_images/sagews-2q.png"><img alt="source code with double question mark" src="_images/sagews-2q.png" style="width: 70%;" /></a>
</figure>
</section>
<section id="tab-completion">
<h3><a class="toc-backref" href="#id19" role="doc-backlink">Tab Completion</a><a class="headerlink" href="#tab-completion" title="Link to this heading"></a></h3>
<p>To get a hint for possible completions of a function name, method argument, etc., type the beginning of what you are looking for then press the <code class="docutils literal notranslate"><span class="pre">[tab]</span></code> key. This is a quick way to browse through the methods for an object.</p>
<figure class="align-center" id="id7">
<a class="reference internal image-reference" href="_images/tabcomplete.png"><img alt="tab completion" src="_images/tabcomplete.png" style="width: 40%;" /></a>
<figcaption>
<p><span class="caption-text">ways to solve <a class="reference external" href="http://doc.sagemath.org/html/en/reference/calculus/sage/calculus/desolvers.html">differential equations in SageMath</a></span><a class="headerlink" href="#id7" title="Link to this image"></a></p>
</figcaption>
</figure>
</section>
</section>
<section id="sage-worksheet-slow-when-plotting-disable-svg">
<span id="index-4"></span><span id="index-3"></span><h2><a class="toc-backref" href="#id20" role="doc-backlink">Sage Worksheet Slow When Plotting? Disable svg.</a><a class="headerlink" href="#sage-worksheet-slow-when-plotting-disable-svg" title="Link to this heading"></a></h2>
<p>Plots can generate a large number of points. The default display format for plots is <code class="docutils literal notranslate"><span class="pre">svg</span></code>, which gives excellent detail, but consumes an amount of memory proportional to the number of points and can markedly slow down worksheet performance.</p>
<p>You can efficiently display plots with as many points as you want if you use <code class="docutils literal notranslate"><span class="pre">show()</span></code> with an option of <code class="docutils literal notranslate"><span class="pre">svg=False</span></code>, for example:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>show(plot(sin(x^2),(x,0,10)),svg=False)
</pre></div>
</div>
<p>This approach also works with <code class="docutils literal notranslate"><span class="pre">list_plot()</span></code>. There’s no way at present to default to svg disabled. You must use the setting with each plot.</p>
</section>
<section id="how-long-are-definitions-stored-in-a-sage-worksheet">
<span id="index-5"></span><h2><a class="toc-backref" href="#id21" role="doc-backlink">How Long are Definitions Stored in a Sage Worksheet?</a><a class="headerlink" href="#how-long-are-definitions-stored-in-a-sage-worksheet" title="Link to this heading"></a></h2>
<p>Definitions (of variables, functions, etc.) are stored in the worksheet process and are retained until that process terminates. The worksheet process may end by itself, for example when <code class="docutils literal notranslate"><span class="pre">Restart</span></code> is clicked at the top of the worksheet. It is also terminated when the sage worksheet server terminates or is restarted, when the project is stopped or restarted, and when the host virtual machine restarts.</p>
<p>Projects are stopped after some number of hours of non-interactive use (see <a class="reference internal" href="howto/software-development.html#idle-timeout"><span class="std std-ref">Idle Timeout</span></a>). If your project is on a free server, it will be stopped whenever the Google pre-emptible server instance restarts, typically once per 24 hours.</p>
<p>SageMath built-in functions <code class="docutils literal notranslate"><span class="pre">save</span></code>, <code class="docutils literal notranslate"><span class="pre">load</span></code>, <code class="docutils literal notranslate"><span class="pre">save_session</span></code> and <code class="docutils literal notranslate"><span class="pre">load_session</span></code> are useful for saving and restoring state. See <a class="reference external" href="http://doc.sagemath.org/html/en/reference/misc/sage/misc/session.html">Loading and saving sessions and listing all variables</a>.</p>
</section>
<section id="wiki-resources">
<h2><a class="toc-backref" href="#id22" role="doc-backlink">Wiki resources</a><a class="headerlink" href="#wiki-resources" title="Link to this heading"></a></h2>
<section id="sagews-wiki">
<span id="id1"></span><h3><a class="toc-backref" href="#id23" role="doc-backlink">Sage Worksheets</a><a class="headerlink" href="#sagews-wiki" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p>A previous version of this page is at <a class="reference external" href="https://github.com/sagemathinc/cocalc/wiki/sagews">Sage Worksheet UI and Help</a></p></li>
<li><p><a class="reference external" href="https://github.com/sagemathinc/cocalc/wiki/sagews-custom-modes">Custom “Mode Commands” in Sage Worksheets</a></p></li>
<li><p><a class="reference external" href="https://github.com/sagemathinc/cocalc/search?utf8=%E2%9C%93&amp;q=&amp;type=Wikis">Search the CoCalc wiki</a> Enter your search text in the “Search or jump to…” blank at the top.</p></li>
</ul>
</section>
<section id="conversion-utilities">
<h3><a class="toc-backref" href="#id24" role="doc-backlink">Conversion utilities</a><a class="headerlink" href="#conversion-utilities" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p>There are buttons in the UI to convert to PDF, a print-button or a Jupyter Notebook</p></li>
<li><p><a class="reference external" href="https://github.com/sagemathinc/cocalc/wiki/sagews2html">SageWS to HTML</a> (including a utility to extract the sagews file from a generated HTML file)</p></li>
<li><p>Run <code class="docutils literal notranslate"><span class="pre">cc-sagews2pdf</span> <span class="pre">--help</span></code> in a <a class="reference internal" href="terminal.html"><span class="doc">Linux Terminal</span></a> for more information about converting to PDF</p></li>
<li><p>Similarly, <code class="docutils literal notranslate"><span class="pre">cc-sagews2ipynb</span></code> is a command-line utility to convert Sage worksheet to Jupyter notebook, and <code class="docutils literal notranslate"><span class="pre">cc-ipynb2sagews</span></code> does the reverse conversion, from Jupyter notebook to Sage worksheet.</p></li>
</ul>
</section>
</section>
<section id="help-about-sagemath">
<h2><a class="toc-backref" href="#id25" role="doc-backlink">Help about SageMath</a><a class="headerlink" href="#help-about-sagemath" title="Link to this heading"></a></h2>
<p>Items relating strictly to SageMath, whether or not you are using CoCalc.</p>
<ul class="simple">
<li><p><strong>Quickstart:</strong> read the <a class="reference external" href="https://doc.sagemath.org/html/en/">documentation</a>, in particular the <a class="reference external" href="https://doc.sagemath.org/html/en/tutorial/index.html">Tutorial</a>.</p></li>
<li><p><a class="reference external" href="https://github.com/sagemathinc/cocalc/wiki/MathematicalSyntaxErrors">The Top Mathematical Syntax Errors in Sage</a></p></li>
<li><p><a class="reference internal" href="howto/sage-question.html#sage-question"><span class="std std-ref">Questions about Sage</span></a> – how to get help working with Sage.</p></li>
<li><p><a class="reference external" href="https://github.com/sagemathinc/cocalc/wiki/SageBug">Sage Bugreport</a> – I am using Sage and think I have found a bug</p></li>
</ul>
</section>
<section id="howto">
<h2><a class="toc-backref" href="#id26" role="doc-backlink">Howto</a><a class="headerlink" href="#howto" title="Link to this heading"></a></h2>
<section id="attach-sage-files-to-sage-worksheets">
<span id="attach-sage-files"></span><span id="index-6"></span><h3><a class="toc-backref" href="#id27" role="doc-backlink">Attach Sage files to Sage Worksheets</a><a class="headerlink" href="#attach-sage-files-to-sage-worksheets" title="Link to this heading"></a></h3>
<p><strong>Is there a way to write functions in one worksheet, and then import them to another and use them there?</strong></p>
<p>Not exactly, but you can write code in a <code class="docutils literal notranslate"><span class="pre">.sage</span></code> file and then load it into another Sage Worksheet as illustrated at
<a class="reference external" href="https://cocalc.com/share/4a5f0542-5873-4eed-a85c-a18c706e8bcd/support/2018-06-12-sage-code/?viewer=share">https://cocalc.com/share/4a5f0542-5873-4eed-a85c-a18c706e8bcd/support/2018-06-12-sage-code/?viewer=share</a></p>
<ol class="arabic simple">
<li><p>Put code in a new file with extension <code class="docutils literal notranslate"><span class="pre">.sage</span></code>, e.g. <code class="docutils literal notranslate"><span class="pre">code.sage</span></code></p></li>
<li><p>In a Sage worksheet or the terminal, run this: <code class="docutils literal notranslate"><span class="pre">%attach</span> <span class="pre">code.sage</span></code> or <code class="docutils literal notranslate"><span class="pre">attach(&quot;code.sage&quot;)</span></code></p></li>
<li><p>Now all code in <code class="docutils literal notranslate"><span class="pre">code.sage</span></code> is available in your worksheet, and whenever it changes, it will get reloaded automatically.</p></li>
<li><p>If you’re using Jupyter, this is all broken (see <a class="reference external" href="https://github.com/sagemathinc/cocalc/issues/2916">https://github.com/sagemathinc/cocalc/issues/2916</a>), but at least you can use <code class="docutils literal notranslate"><span class="pre">load(&quot;code.sage&quot;)</span></code> instead.</p></li>
</ol>
</section>
<section id="connect-an-html-form-with-python-code">
<h3><a class="toc-backref" href="#id28" role="doc-backlink">Connect an HTML form with Python code</a><a class="headerlink" href="#connect-an-html-form-with-python-code" title="Link to this heading"></a></h3>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The following explanation might be outdated!</p>
</div>
<p>To create a connection between your HTML form in a .sagews file created using HTML, CSS and JS, you need to use the <code class="docutils literal notranslate"><span class="pre">worksheet.execute_code()</span></code> function in your JS code.</p>
<p>Because <code class="docutils literal notranslate"><span class="pre">worksheet.execute_code</span></code> isn’t a standard JS function, but special CoCalc function, you need to load your JS code with <code class="docutils literal notranslate"><span class="pre">worksheet.execute_code()</span></code>.  In particular do NOT use</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>load(&#39;path/to/js/code.js&#39;)
</pre></div>
</div>
<p>but instead use</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>salvus.javascript(open(&#39;path/to/js/code.js&#39;).read())
</pre></div>
</div>
<p>For example in a <code class="docutils literal notranslate"><span class="pre">.sagews</span></code> file suppose you created a div with <code class="docutils literal notranslate"><span class="pre">id='myApp'</span></code> as follows:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>%html
&lt;div id=&#39;myApp&#39;&gt;
....
    &lt;div id=&quot;msgLog&quot;&gt;&lt;/div&gt;
    &lt;div id=&quot;msgErr&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
</pre></div>
</div>
<p>Let’s say your Python function will double <code class="docutils literal notranslate"><span class="pre">x</span></code>:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>def myfunc(x):
    print(x*2)
</pre></div>
</div>
<p>In your JS code type:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>worksheet.execute_code({
    code: &#39;myfunc(n)&#39;,
    data: {n: 2},
    preparse: true,
    cb: function(msg){
            if(msg.stdout){$(&#39;#myApp #msgLog&#39;).html(msg.stdout);}
            if(msg.stderr){$(&#39;#myApp #msgErr&#39;).html(msg.stderr);}
    }
});
</pre></div>
</div>
<p>Please note that <code class="docutils literal notranslate"><span class="pre">myfunc()</span></code> doesn’t <code class="docutils literal notranslate"><span class="pre">return</span></code> anything.
On the contrary, it uses <code class="docutils literal notranslate"><span class="pre">print()</span></code> to send output. This is because JS and python are different languages, and you can’t just use <code class="docutils literal notranslate"><span class="pre">return</span></code> in your Python function to return some answer. <code class="docutils literal notranslate"><span class="pre">stdout</span></code> in JS code means standard output stream.
That is, the <code class="docutils literal notranslate"><span class="pre">print</span></code> function in your Python code places the result of <code class="docutils literal notranslate"><span class="pre">myfunc()</span></code> in the output stream.
That’s why you need to use <code class="docutils literal notranslate"><span class="pre">print()</span></code> but not <code class="docutils literal notranslate"><span class="pre">return()</span></code> in your Python code.</p>
<p>Also, if your Python code will raise some exception,
then it will result in output to <code class="docutils literal notranslate"><span class="pre">stderr</span></code> the standard error stream.
If you JS code (as in the example above) catches stderr,
you can get any error message from your Python code.</p>
</section>
<section id="play-sounds">
<h3><a class="toc-backref" href="#id29" role="doc-backlink">Play sounds</a><a class="headerlink" href="#play-sounds" title="Link to this heading"></a></h3>
<p>CoCalc runs on a remote machine in the cloud.
To make a wav, mp3 or ogg file play on your computer, it must travel from the cloud to your browser.
That’s done by first saving the waveform to a file in CoCalc and then downloading it into the website inside an <a class="reference external" href="https://developer.mozilla.org/de/docs/Web/HTML/Using_HTML5_audio_and_video">HTML5 audio tag</a>.</p>
<ol class="arabic simple">
<li><p>Run the code below to render a waveform to a file using <a class="reference external" href="https://docs.scipy.org/doc/scipy/reference/generated/scipy.io.wavfile.write.html">scipy.io.wavfile.write</a>:</p></li>
</ol>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">scipy.io.wavfile</span> <span class="kn">import</span> <span class="n">write</span> <span class="k">as</span> <span class="n">write_wav</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="c1"># Samples per second</span>
<span class="n">sps</span> <span class="o">=</span> <span class="mi">22050</span>
<span class="c1"># Frequency / pitch of the sine wave</span>
<span class="n">freq_hz</span> <span class="o">=</span> <span class="mi">440</span>

<span class="c1"># Duration per segment</span>
<span class="n">duration_s</span> <span class="o">=</span> <span class="mf">1.0</span>

<span class="n">xx</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">duration_s</span> <span class="o">*</span> <span class="n">sps</span><span class="p">)</span>  <span class="o">/</span> <span class="n">sps</span>
<span class="n">yy</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">):</span>
    <span class="n">yy</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span> <span class="o">*</span> <span class="n">xx</span> <span class="o">*</span> <span class="n">freq_hz</span><span class="p">)</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="mf">0.2</span> <span class="o">+</span> <span class="p">(</span><span class="n">i</span><span class="o">/</span><span class="mf">5.0</span><span class="p">)</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span> <span class="o">*</span> <span class="n">xx</span> <span class="o">*</span> <span class="p">(</span><span class="mi">100</span> <span class="o">+</span> <span class="n">freq_hz</span><span class="p">)))</span>
<span class="n">yy</span> <span class="o">=</span> <span class="mf">0.3</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">concatenate</span><span class="p">(</span><span class="n">yy</span><span class="p">)</span> <span class="c1"># 0.3 adjusts volume</span>
<span class="n">yy16bit</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">int16</span><span class="p">(</span><span class="n">yy</span> <span class="o">*</span> <span class="mi">32767</span><span class="p">)</span>

<span class="c1"># Write the .wav file</span>
<span class="n">write_wav</span><span class="p">(</span><span class="s1">&#39;sound.wav&#39;</span><span class="p">,</span> <span class="n">sps</span><span class="p">,</span> <span class="n">yy16bit</span><span class="p">)</span>
</pre></div>
</div>
<ol class="arabic" start="2">
<li><p>Put this in a block of code. After evaluating it you’ll see an embedded player:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>%md
&lt;audio controls=true src=&quot;sound.wav&quot;/&gt;
</pre></div>
</div>
</li>
</ol>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Currently, embedding into HTML5 via a <cite>%md</cite> Markdown cell does not work.
Please check the status of <a class="reference external" href="https://github.com/sagemathinc/cocalc/issues/4240">ticket #4240</a>.</p>
<p>Until it is resolved, run <code class="docutils literal notranslate"><span class="pre">salvus.file('sound.wav')</span></code> and click on the generated link to open the file in a new tab.
Your browser should show you a little player.</p>
</div>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="x11.html" class="btn btn-neutral float-left" title="Graphical Applications" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="markdown.html" class="btn btn-neutral float-right" title="Markdown" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024, Sagemath, Inc., CC BY-4.0 licensed.</p>
  </div>

  

<div role="contentinfo">
  <p>
    Please contact us for <a href="https://cocalc.com/support/new?type=question&subject=A%20question%20about%20CoCalc%20...&body=&title=Ask%20us%20a%20Question!">Questions and Feedback</a>,
    <a href="https://github.com/sagemathinc/cocalc-doc/">Documentation Repository</a>,
    <a href="https://cocalc.com/policies/">Privacy Policy and ToS</a>.
   </p>
   <p>
    <a href="https://github.com/sagemathinc/cocalc-doc/edit/master/source/sagews.rst" class="fa fa-github"> Edit this page on GitHub</a>
  </p>
  <p>
    <strong><a href="https://cocalc.com/app">Start CoCalc</a></strong> – start free, upgrade later!
  </p>
</div>


</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>
   
  <a class="github cocalcbanner" href="https://cocalc.com/app?anonymous=true">
     <img alt="Start CoCalc"
          class="github"
          src="_static/start-cocalc.png"
          style="position: fixed; top: 0; right: 0; border: 0; height: 75px; width: 75px">
  </a>


</body>
</html>